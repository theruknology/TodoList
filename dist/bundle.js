(()=>{"use strict";const e=e=>({name:e,projectTasks:[]}),t=(()=>{const e=[];let t=[];return{addProject:t=>{e.push(t)},removeProject:t=>{e.splice(e.indexOf(t,1))},addTaskToProject:(e,t)=>{t.projectTasks.push(e)},removeTaskFromProject:(e,t)=>{t.projectTasks.splice(projectTasks.indexOf(e,1))},projectNames:()=>{t=[];for(let o=0;o<e.length;o++)t.push(e[o].name);return t},allProjects:e}})(),o=(()=>{const e=[],l=()=>{localStorage.clear();let t=e.map((e=>e));localStorage.setItem("tasks",JSON.stringify({list:t}))};return{addTask:t=>{e.push(t),(e=>{e.domElement=document.createElement("div"),e.domElement.classList.add("task-container"),e.doneButton=document.createElement("div"),e.domElement.appendChild(e.doneButton),e.domElement.innerHTML+=`<div class="task-info">\n    <p>${e.title}</p>\n    <p class="task-date">${e.dueDate}</p>\n    </div>`,e.doneButton.addEventListener("click",(()=>{o.deleteTask(e),o.updateProjectStorage()}))})(t),l()},deleteTask:t=>{e.splice(e.indexOf(t,1)),l()},updateStorage:l,updateTasksFromStorage:()=>{let t=JSON.parse(localStorage.getItem("tasks")).list;for(let o=0;o<t.length;o++)e[o]=t[o]},updateProjectStorage:()=>{for(let o=0;o<e.length;o++)for(let l=0;l<t.allProjects.length;l++)e[o].project.name==t.allProjects[l].name&&t.addTaskToProject(e[o],t.allProjects[l])},allTasks:e}})();(class{static loadHTML(){this.loadFromLocalStorage(),this.loadInitialButtons(),this.loadProjectMenu(),this.updateTaskContainer(o.allTasks),this.loadNewTask()}static loadFromLocalStorage(){null!=localStorage.getItem("tasks")&&o.updateTasksFromStorage()}static loadInitialButtons(){const e=document.querySelector(".new-task-input");document.querySelector(".new-task-button").addEventListener("click",(()=>{e.style.display="grid"}));const t=document.querySelector(".add-project"),o=document.querySelector(".add-project-input");t.addEventListener("click",(()=>{o.style.display="flex"})),this.loadNewProject();const l=document.querySelector(".select-project-button"),a=document.querySelector(".project-dropdown");l.addEventListener("click",(()=>{a.style.display="block"}))}static loadProjectMenu(){document.querySelector(".project-menu").innerHTML="";for(let e=0;e<t.allProjects.length;e++)t.allProjects[e].domElement=document.createElement("p"),t.allProjects[e].domElement.classList.add("project-name"),t.allProjects[e].domElement.innerHTML=t.allProjects[e].name,document.querySelector(".project-menu").appendChild(t.allProjects[e].domElement),console.log("project added"),console.log(t.allProjects[e].domElement),console.log(document.querySelector(".project-menu").innerHTML),t.allProjects[e].domElement.addEventListener("click",(()=>(this.updateTaskContainer(t.allProjects[e]),!1)))}static updateTaskContainer(e){document.querySelector(".all-tasks").innerHTML="";for(let t=0;t<e.length;t++)document.querySelector(".all-tasks").appendChild(e[t].domElement)}static loadNewProject(){document.querySelector(".add-project-button").addEventListener("click",(()=>{""==document.querySelector("#project-title-input").value?alert("Please enter project name"):t.projectNames().includes(document.querySelector("#project-title-input").value)?(alert("Project alread exists."),console.log("alreadyexists")):(t.addProject(e(document.querySelector("#project-title-input").value)),this.loadProjectMenu(),console.log("new project added!"),console.log(document.querySelector("#project-title-input").value))}))}static loadNewTask(){document.querySelector(".add-task-button").addEventListener("click",(()=>{let l=document.querySelector("#task-title-input").value,a=document.querySelector("#task-date-input").value,r=document.querySelector(".selected-project").innerHTML;if(""==l||""==a)alert("Please enter all details to add a task!");else{let c;"Select Project"==r&&(c="",console.log("setting basic"));for(let e=0;e<t.allProjects.length;e++)r==t.allProjects[e].name&&(c=t.allProjects[e]);o.addTask(((o,l,a)=>{const r=e("basic");return t.addProject(r),""==a&&(a=r),{title:o,dueDate:l,project:a,domElement:void 0,doneButton:void 0}})(l,a,c)),o.allTasks,o.updateProjectStorage(),this.updateTaskContainer(o.allTasks)}return!1}))}}).loadHTML()})();